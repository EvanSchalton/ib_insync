https://ibkrcampus.com/campus/ibkr-api-page/twsapi-ref/

# TWS API Reference | IBKR API | IBKR Campus
TWS API Reference | IBKR API | IBKR Campus

## Introduction
This section provides an approximate class reference for all of the TWS API classes referenced throughout the primary documentation pages.

Please be aware this content is currently in Beta and we are moving to further elaborate on all of these data points in the near future.

## AccountSummaryTags Class Reference
Class containing all existing values being reported by EClientSocket::reqAccountSummary.

Name Type Description

Public Attributes

AccountType = “AccountType” string
NetLiquidation = “NetLiquidation” string
TotalCashValue = “TotalCashValue” string Total cash including futures pnl
SettledCash = “SettledCash” string For cash accounts, this is the same as TotalCashValue
AccruedCash = “AccruedCash” string Net accrued interest
BuyingPower = “BuyingPower” string The maximum amount of marginable US stocks the account can buy
EquityWithLoanValue = “EquityWithLoanValue” string Cash + stocks + bonds + mutual funds
PreviousDayEquityWithLoanValue = “PreviousDayEquityWithLoanValue” string
GrossPositionValue = “GrossPositionValue” string The sum of the absolute value of all stock and equity option positions
ReqTEquity = “ReqTEquity” string
ReqTMargin = “ReqTMargin” string
SMA = “SMA” string Special Memorandum Account
InitMarginReq = “InitMarginReq” string
MaintMarginReq = “MaintMarginReq” string
AvailableFunds = “AvailableFunds” string
ExcessLiquidity = “ExcessLiquidity” string
Cushion = “Cushion” string Excess liquidity as a percentage of net liquidation value
FullInitMarginReq = “FullInitMarginReq” string
FullMaintMarginReq = “FullMaintMarginReq” string
FullAvailableFunds = “FullAvailableFunds” string
FullExcessLiquidity = “FullExcessLiquidity” string
LookAheadNextChange = “LookAheadNextChange” string Time when look-ahead values take effect
LookAheadInitMarginReq = “LookAheadInitMarginReq” string
LookAheadMaintMarginReq = “LookAheadMaintMarginReq” string
LookAheadAvailableFunds = “LookAheadAvailableFunds” string
LookAheadExcessLiquidity = “LookAheadExcessLiquidity” string
HighestSeverity = “HighestSeverity” string A measure of how close the account is to liquidation
DayTradesRemaining = “DayTradesRemaining” string The Number of Open/Close trades one could do before Pattern Day Trading is detected; a value of “-1” means user can do unlimited day trades.
Leverage = “Leverage” string GrossPositionValue / NetLiquidation

Static Public Member Functions

GetAllTags () static string Returns All Tags

## Bar Class Reference
The historical data bar’s description.

Name Type Description

Time string The bar’s date and time (either as a yyyymmss hh:mm:ss formatted string or as system time according to the request). Time zone is the TWS time zone chosen on login.
Open double The bar’s open price.
High double The bar’s high price.
Low double The bar’s low price.
Close double The bar’s close price.
Volume decimal The bar’s traded volume if available (only available for TRADES)
Count int The number of trades during the bar’s timespan (only available for TRADES)
WAP decimal The bar’s Weighted Average Price (only available for TRADES)

## ComboLeg Class Reference
Class representing a leg within combo orders.

Name Type Description

ConId int The Contract’s IB’s unique id.
Ratio int Select the relative number of contracts for the leg you are constructing. To help determine the ratio for a specific combination order
Action string The side (buy or sell) of the leg: For individual accounts, only BUY and SELL are available. SSHORT is for institutions.
Exchange string The destination exchange to which the order will be routed.
OpenClose int Specifies whether an order is an open or closing order. For institutional customers to determine if this order is to open or close a position.
  0 – Same as the parent security. This is the only option for retail customers.
  1 – Open. This value is only valid for institutional customers.
  2 – Close. This value is only valid for institutional customers.
  3 – Unknown.
ShortSaleSlot int For stock legs when doing short selling. Set to 1 = clearing broker, 2 = third party
DesignatedLocation string When ShortSaleSlot is 2, this field shall contain the designated location.
ExemptCode int Mark order as exempt from short sale uptick rule. Possible values: 0 – Does not apply the rule. -1 – Applies the short sale uptick rule.

Public Member Functions

SAME = 0 static int Same as the parent security. This is the only option for retail customers.
OPEN = 1 static int Open. This value is only valid for institutional customers.
CLOSE = 2 static int Close. This value is only valid for institutional customers.
UNKNOWN = 3 static int Unknown

## CommissionAndFeesReport Class Reference
Class representing the commissions and fees generated by an execution.

Name Type Description

ExecId string the execution’s id this commission belongs to.
CommissionAndFees double the combined cost of commissions and fees.
Currency string The currency denoting the value of the commissionAndFees.
RealizedPNL double the realized profit and loss
Yield double The income return.
YieldRedemptionDate int date expressed in yyyymmdd format.

Public Member Functions

Equals (object obj) override bool
GetHashCode () override int

## Contract Class Reference
Class describing an instrument’s definition.

Name Type Description

ConId int The unique IB contract identifier.
Symbol string The underlying’s asset symbol.
SecType string The security’s type: STK – stock (or ETF) OPT – option FUT – future IND – index FOP – futures option CASH – forex pair BAG – combo WAR – warrant BOND- bond CMDTY- commodity NEWS- news FUND- mutual fund.
LastTradeDateOrContractMonth string The contract’s last trading day or contract month (for Options and Futures). Strings with format YYYYMM will be interpreted as the Contract Month whereas YYYYMMDD will be interpreted as Last Trading Day.
LastTradeDate string The contract’s last trading day.
Strike double The option’s strike price.
Right string Either Put or Call (i.e. Options). Valid values are P, PUT, C, CALL.
Multiplier string The instrument’s multiplier (i.e. options, futures).
Exchange string The destination exchange.
Currency string The underlying’s currency.
LocalSymbol string The contract’s symbol within its primary exchange. For options, this will be the OCC symbol
PrimaryExch string The contract’s primary exchange. For smart routed contracts, used to define contract in case of ambiguity. Should be defined as native exchange of contract. For exchanges which contain a period in name, will only be part of exchange name prior to period, i.e. ENEXT for ENEXT.BE
TradingClass string The trading class name for this contract. Available in TWS contract description window as well. For example, GBL Dec ’13 future’s trading class is “FGBL”
IncludeExpired bool If set to true, contract details requests and historical data queries can be performed pertaining to expired futures contracts. Expired options or other instrument types are not available.
SecIdType string Security’s identifier when querying contract’s details or placing orders ISIN – Example: Apple: US0378331005 CUSIP – Example: Apple: 037833100.
SecId string Identifier of the security type. More…
Description string Description of the contract.
IssuerId string IssuerId of the contract.
ComboLegsDescription string Description of the combo legs.
ComboLegs List The legs of a combined contract definition. More…
DeltaNeutralContract DeltaNeutralContract Delta and underlying price for Delta-Neutral combo orders. Underlying (STK or FUT)

Public Member Functions

ToString() override string

## ContractDetails Class Reference
Extended contract details.

Name Type Description

Contract Contract A fully-defined Contract object.
MarketName string The market name for this product.
MinTick double The minimum allowed price variation. Note that many securities vary their minimum tick size according to their price. This value will only show the smallest of the different minimum tick sizes regardless of the product’s price. Full information about the minimum increment price structure can be obtained with the reqMarketRule function or the IB Contract and Security Search site.
PriceMagnifier int Allows execution and strike prices to be reported consistently with market data
OrderTypes string Supported order types for this product.
ValidExchanges string Valid exchange fields when placing an order for this contract.
UnderConId int For derivatives
LongName string Descriptive name of the product.
ContractMonth string Typically the contract month of the underlying for a Future contract.
Industry string The industry classification of the underlying/product. For example
Category string The industry category of the underlying. For example
Subcategory string The industry subcategory of the underlying. For example
TimeZoneId string The time zone for the trading hours of the product. For example
TradingHours string The trading hours of the product. This value will contain the trading hours of the current day as well as the next’s. For example
LiquidHours string The liquid hours of the product. This value will contain the liquid hours (regular trading hours) of the contract on the specified exchange. Format for TWS versions until 969: 20090507:0700-1830
EvRule string Contains the Economic Value Rule name and the respective optional argument. The two values should be separated by a colon. For example
EvMultiplier double Tells you approximately how much the market value of a contract would change if the price were to change by 1. It cannot be used to get market value by multiplying the price by the approximate multiplier.
AggGroup int Aggregated group Indicates the smart-routing group to which a contract belongs. contracts which cannot be smart-routed have aggGroup = -1.
SecIdList List A list of contract identifiers that the customer is allowed to view. CUSIP/ISIN/etc. For US stocks
UnderSymbol string For derivatives
UnderSecType string For derivatives
MarketRuleIds string The list of market rule IDs separated by comma Market rule IDs can be used to determine the minimum price increment at a given price.
RealExpirationDate string Real expiration date. Requires TWS 968+ and API v973.04+. Python API specifically requires API v973.06+.
LastTradeTime string Last trade time.
StockType string Stock type.
Cusip string The nine-character bond CUSIP. For Bonds only. Receiving CUSIPs requires a CUSIP market data subscription.
Ratings string Identifies the credit rating of the issuer. This field is not currently available from the TWS API. For Bonds only. A higher credit rating generally indicates a less risky investment. Bond ratings are from Moody’s and S&P respectively. Not currently implemented due to bond market data restrictions.
DescAppend string A description string containing further descriptive information about the bond. For Bonds only.
BondType string The type of bond
CouponType string The type of bond coupon. This field is currently not available from the TWS API. For Bonds only.
Callable bool If true
Putable bool Values are True or False. If true
Coupon double The interest rate used to calculate the amount you will receive in interest payments over the course of the year. This field is currently not available from the TWS API. For Bonds only.
Convertible bool Values are True or False. If true
Maturity string The date on which the issuer must repay the face value of the bond. This field is currently not available from the TWS API. For Bonds only. Not currently implemented due to bond market data restrictions.
IssueDate string The date the bond was issued. This field is currently not available from the TWS API. For Bonds only. Not currently implemented due to bond market data restrictions.
NextOptionDate string Only if bond has embedded options. This field is currently not available from the TWS API. Refers to callable bonds and puttable bonds. Available in TWS description window for bonds.
NextOptionType string Type of embedded option. This field is currently not available from the TWS API. Only if bond has embedded options.
NextOptionPartial bool Only if bond has embedded options. This field is currently not available from the TWS API. For Bonds only.
Notes string If populated for the bond in IB’s database. For Bonds only.
MinSize decimal Order’s minimal size.
SizeIncrement decimal Order’s size increment.
SuggestedSizeIncrement decimal Order’s suggested size increment.
FundName string Fund’s name.
FundFamily string Fund’s family.
FundType string Fund’s type.
FundFrontLoad string Fund’s front load.
FundBackLoad string Fund’s back load.
FundBackLoadTimeInterval string Fund’s back load time interval.
FundManagementFee string Fund’s management fee.
FundClosed bool Fund closed flag.
FundClosedForNewInvestors bool Fund closed for new investors flag.
FundClosedForNewMoney bool Fund closed for new money flag.
FundNotifyAmount string Fund’s notify amount.
FundMinimumInitialPurchase string Fund’s minimum initial purchase.
FundSubsequentMinimumPurchase string Fund’s subsequent minimum purchase.
FundBlueSkyStates string Fund’s blue sky states.
FundBlueSkyTerritories string Fund’s blue sky territories.
FundDistributionPolicyIndicator FundDistributionPolicyIndicator Fund’s distribution policy indicator.
FundAssetType FundAssetType Fund’s asset type.

## CodeMsgPair Class Reference
Associates error code and error message as a pair.

Name Type Description

Code int
Message string

## DeltaNeutralContract Class Reference
Delta-Neutral Contract.

Name Type Description

ConId int The unique contract identifier specifying the security. Used for Delta-Neutral Combo contracts.
Delta double The underlying stock or future delta. Used for Delta-Neutral Combo contracts.
Price double The price of the underlying. Used for Delta-Neutral Combo contracts.

## EClient Class Reference
TWS/Gateway client class This client class contains all the available methods to communicate with IB. Up to thirty-two clients can be connected to a single instance of the TWS/Gateway simultaneously. From herein, the TWS/Gateway will be referred to as the Host.

Name Type Description

AllowRedirect bool
ServerTime string
optionalCapabilities string
AsyncEConnect bool

Public Member Functions

SetConnectOptions (string connectOptions) void Ignore. Used for IB’s internal purposes.
DisableUseV100Plus () void Allows to switch between different current (V100+) and previ
IsConnected () bool Indicates whether the API-TWS connection has been closed automatically invoked and must be by the API client. More…
startApi () void Initiates the message exchange between the client applicati
Close () void Terminates the connection and notifies the EWrapper implem
eDisconnect (bool resetState=true) virtual void Closes the socket connection and terminates its thread.
reqCompletedOrders (bool apiOnly) void Requests completed orders.
cancelTickByTickData (int requestId) void Cancels tick-by-tick data.
reqTickByTickData (int requestId …) void Contract contract … (truncated)

cancelHistoricalData (int reqId) void Cancels a historical data request. More…
calculateImpliedVolatility (int reqId …) void Contract contract  
Request the calculation of the implied volatility based on hypothetical option and its underlying prices.  
The calculation will be returned in EWrapper’s tickOptionComputation callback.  

calculateOptionPrice (int reqId …) void Contract contract  
The calculation will be returned in EWrapper’s tickOptionComputation callback.  

cancelAccountSummary (int reqId) void Cancels the account’s summary request.  

cancelCalculateImpliedVolatility (int reqId) void Cancels an option’s implied volatility calculation request.  

cancelCalculateOptionPrice (int reqId) void Cancels an option’s price calculation request.  

cancelFundamentalData (int reqId) void Cancels Fundamental data request.  

cancelMktData (int tickerId) void Cancels a RT Market Data request.  

cancelMktDepth (int tickerId, bool isSmartDepth) void Cancels Market Depth subscription.  

cancelNewsBulletin () void Cancels IB’s news bulletin subscription.  

cancelOrder (int orderId, string manualOrderCancelTime) void  
Note: API clients cannot cancel individual orders placed by other clients. Only reqGlobalCancel is available.  

cancelPositions () void Cancels a previous position subscription request.  

cancelRealTimeBars (int tickerId) void Cancels Real Time Bars’ subscription.  

cancelScannerSubscription (int tickerId) void Cancels Scanner Subscription.  

exerciseOptions (int tickerId, Contract contract …) void  
Note: this function is affected by a TWS setting which specifies if an exercise request must be finalized.  

placeOrder (int id, Contract contract …) void Place an order.  

replaceFA (int reqId, int faDataType …) void Replace FA configuration.  

requestFA (int faDataType) void Requests the FA configuration.  

reqAccountSummary (int reqId, string group …) void  
Subscribe to the account summary as presented in TWS’ Account Summary tab.  

reqAccountUpdates (bool subscribe, string acctCode) void Request account updates.  

reqAllOpenOrders () void Requests all current open orders in associated accounts.  

reqAutoOpenOrders (bool autoBind) void Requests status updates about future orders placed from TWS.  

reqContractDetails (int reqId, Contract contract) void  
Provides all the contracts matching the contract provided, or complete options/futures chains.  

reqCurrentTime () void Requests TWS’s current time.  

reqExecutions (int reqId, ExecutionFilter filter) void Request execution reports.  

reqFundamentalData (int reqId, Contract contract …) void Requests fundamental data.  

reqGlobalCancel () void Cancels all active orders (including TWS-placed).  

reqHistoricalData (int tickerId, Contract contract …) void Request historical data.  

reqIds (int numIds) void Requests the next valid order ID.  

reqManagedAccts () void Requests the accounts the logged user has access to.  

reqMktData (int tickerId, Contract contract …) void Request market data.  

reqMarketDataType (int marketDataType) void  
Switches data type returned from reqMktData between real-time and frozen.  

reqMarketDepth (int tickerId, Contract contract …) void Requests Market Depth.  

reqNewsBulletins (bool allMessages) void Subscribes to IB’s News Bulletins.  

reqOpenOrders () void Requests all open orders placed by this specific API client.  

reqPositions () void Subscribes to position updates for all accessible accounts.  

reqRealTimeBars (int tickerId, Contract contract …) void  
Subscribe to 5-second real-time bars.  

reqScannerParameters () void Requests an XML list of scanner parameters valid in TWS.  

reqScannerSubscription (int reqId, ScannerSubscription subscription) void Subscribes to a scanner.  

setServerLogLevel (int logLevel) void Changes the TWS/GW log level. Valid values:  
  1 = SYSTEM  
  2 = ERROR  
  3 = WARNING  
  4 = INFORMATION  
  5 = DETAIL  

verifyRequest (string apiName, string apiVersion) void For IB’s internal purpose.  

verifyMessage (string apiData) void For IB’s internal purpose.  

verifyAndAuthRequest (string apiName, string apiVersion) void  

verifyAndAuthMessage (string apiData, string xyzResponse) void  

queryDisplayGroups (int requestId) void Requests available Display Groups in TWS.  

subscribeToGroupEvents (int requestId, int groupId) void Subscribe to group events.  

updateDisplayGroup (int requestId, string contractInfo) void Update display group.  

unsubscribeFromGroupEvents (int requestId) void Cancels a TWS Window Group subscription.  

reqPositionsMulti (int requestId, string account …) void Request positions for multiple accounts/models.  

cancelPositionsMulti (int requestId) void Cancel multi-account positions request.  

reqAccountUpdatesMulti (int requestId, string account …) void Request account updates for multiple accounts/models.  

cancelAccountUpdatesMulti (int requestId) void Cancel multi-account account updates request.  

reqSecDefOptParams (int reqId, string underlyingSymbol …) void Request security definition option parameters.  

reqSoftDollarTiers (int reqId) void Requests pre-defined Soft Dollar Tiers.  

reqFamilyCodes () void Requests family codes for an account.  

reqMatchingSymbols (int reqId, string pattern) void Request matching symbols.  

reqMktDepthExchanges () void Request venues for market depth data.  

reqSmartComponents (int reqId, string bboExchange) void Request smart components.  

reqNewsProviders () void Requests subscribed news providers.  

reqNewsArticle (int requestId, string providerCode …) void Request news article.  

reqHistoricalNews (int requestId, int conId …) void Request historical news.  

reqHeadTimestamp (int tickerId, Contract contract …) void Request head timestamp.  

cancelHeadTimestamp (int tickerId) void Cancel head timestamp request.  

reqHistogramData (int tickerId, Contract contract …) void Request histogram data.  

cancelHistogramData (int tickerId) void Cancel histogram data request.  

reqMarketRule (int marketRuleId) void Requests details about a given market rule.  

reqPnL (int reqId, string account …) void Request real-time PnL subscription.  

cancelPnL (int reqId) void Cancel PnL subscription.  

reqPnLSingle (int reqId, string account …) void Request real-time PnL for a single position.  

cancelPnLSingle (int reqId) void Cancel single-position PnL subscription.  

reqHistoricalTicks (int reqId, Contract contract …) void Request historical tick data.  

reqWshMetaData (int reqId) void Request metadata from WSH calendar.  
cancelWshMetaData (int reqId) void Cancel WSH metadata request.  

reqWshEventData (int reqId, WshEventData wshEventData) void Request WSH event data.  
cancelWshEventData (int reqId) void Cancel WSH event data request.  

reqUserInfo (int reqId) void Request user info.  

IsDataAvailable () bool  
ReadInt () int  
ReadAtLeastNBytes (int msgSize) byte[]  
ReadByteArray (int msgSize) byte[]  

Public Attributes

ServerVersion => serverVersion int  
Returns the Host’s version. Some API functionality might not be available in older Hosts.  

## EClientSocket Class Reference
TWS/Gateway client class. Up to 32 clients can be connected to one Host.

Public Member Functions

serverVersion (int version, EClientMsgSink, string time) void  
eConnect (string host, int port …) void Connect.  
redirect (string host) void Redirect to different host.  
eDisconnect (bool resetState=true) override void Close connection and terminate thread.  

## EReader Class Reference
Captures incoming messages to the API client and places them into a queue.

Public Member Functions

Start () void  
processMsgs () void  
putMessageToQueue () bool  

## EReaderSignal Interface Reference
Notifies thread when messages are ready to be consumed.  

Public Member Functions

issueSignal () void Issues a signal.  
waitForSignal () void Makes the consuming thread wait for a signal.  

## EWrapper Interface Reference
This interface’s methods are used by the Host to communicate with the API client. Every client app must implement this interface.

Public Member Functions

error (Exception e) void Handles API errors.  
error (string str) void Handles string error.  
error (int id, int errorCode …) void Handles error with id and code.  
currentTime (long time) void Receives TWS’s current time (NTP synced).  
tickPrice (int tickerId, int field …) void  
tickSize (int tickerId, int field …) void  
tickString (int tickerId, int field …) void  
tickGeneric (int tickerId, int field …) void  
tickEFP (int tickerId, int tickType …) void  
deltaNeutralValidation (int reqId, DeltaNeutralContract deltaNeutralContract) void  
tickOptionComputation (int tickerId, int field …) void  
tickSnapshotEnd (int tickerId) void  
nextValidId (int orderId) void Receives next valid order id.  
managedAccounts (string accountsList) void Receives comma-separated managed account ids.  
connectionClosed () void Indicates connection closed.  
accountSummary (int reqId, string account …) void Receives account summary.  
accountSummaryEnd (int reqId) void Indicates end of account summary.  
bondContractDetails (int reqId, ContractDetails contract) void  
updateAccountValue (string key, string value …) void  
updatePortfolio (Contract contract, decimal position …) void  
updateAccountTime (string timestamp) void Receives last account update time.  
accountDownloadEnd (string account) void Notifies account info finished.  
orderStatus (int orderId, string status …) void  
openOrder (int orderId, Contract contract …) void  
openOrderEnd () void End of open orders reception.  
contractDetails (int reqId, ContractDetails contractDetails) void  
contractDetailsEnd (int reqId) void After all contracts returned.  
execDetails (int reqId, Contract contract …) void  
execDetailsEnd (int reqId) void End of executions reception.  
commissionReport (CommissionReport commissionReport) void Provides commission report of execution.  
fundamentalData (int reqId, string data) void  
historicalData (int reqId, Bar bar) void  
historicalDataUpdate (int reqId, Bar bar) void  
historicalDataEnd (int reqId, string start …) void  
marketDataType (int reqId, int marketDataType) void  
updateMktDepth (int tickerId, int position …) void  
updateMktDepthL2 (int tickerId, int position …) void  
updateNewsBulletin (int msgId, int msgType …) void  
position (string account, Contract contract …) void  
positionEnd () void End of positions transmission.  
realtimeBar (int reqId, long date …) void  
scannerParameters (string xml) void Provides XML scanner parameters.  
scannerData (int reqId, int rank …) void  
scannerDataEnd (int reqId) void End of scanner data reception.  
receiveFA (int faDataType, string faXmlData) void  

verifyMessageAPI (string apiData) void Not generally available.  
verifyCompleted (bool isSuccessful, string errorText) void  
verifyAndAuthMessageAPI (string apiData, string xyzChallenge) void  
verifyAndAuthCompleted (bool isSuccessful, string errorText) void  
displayGroupList (int reqId, string groups) void  
displayGroupUpdated (int reqId, string contractInfo) void  
connectAck () void Callback acknowledging connection attempt.  
positionMulti (int requestId, string account …) void  
positionMultiEnd (int requestId) void End of positions transmitted.  
accountUpdateMulti (int requestId, string account …) void  
accountUpdateMultiEnd (int requestId) void End of account updates transmitted.  
securityDefinitionOptionParameter (int reqId, string exchange …) void  
securityDefinitionOptionParameterEnd (int reqId) void End of option parameter callbacks.  
softDollarTiers (int reqId, SoftDollarTier[] tiers) void  
familyCodes (FamilyCode[] familyCodes) void Returns array of family codes.  
symbolSamples (int reqId, ContractDescription[] contractDescriptions) void  
mktDepthExchanges (DepthMktDataDescription[] depthMktDataDescriptions) void  
tickNews (int tickerId, long timeStamp …) void  
smartComponents (int reqId, Dictionary<int, …> components) void  
tickReqParams (int tickerId, double minTick …) void  
newsProviders (NewsProvider[] newsProviders) void Returns array of subscribed news providers.  
newsArticle (int requestId, int articleType …) void  
historicalNews (int requestId, string time …) void  
historicalNewsEnd (int requestId, bool hasMore) void  
headTimestamp (int reqId, string headTimestamp) void Beginning of data for contract.  
histogramData (int reqId, HistogramEntry[] data) void  
rerouteMktDataReq (int reqId, int conId …) void Re-route CFD market data request.  
rerouteMktDepthReq (int reqId, int conId …) void Re-route CFD market depth request.  
marketRule (int marketRuleId, PriceIncrement[] priceIncrements) void Market rule increments.  
pnl (int reqId, double dailyPnL …) void  
pnlSingle (int reqId, decimal pos …) void  
historicalTicks (int reqId, HistoricalTick[] ticks) void  
historicalTicksBidAsk (int reqId, HistoricalTickBidAsk[] ticks) void  
historicalTicksLast (int reqId, HistoricalTickLast[] ticks) void  
tickByTickAllLast (int reqId, int tickType …) void  
tickByTickBidAsk (int reqId, long time …) void  
tickByTickMidPoint (int reqId, long time …) void  
orderBound (long orderId, int apiClientId …) void  
completedOrder (Contract contract, Order order …) void  
completedOrdersEnd () void End of completed orders reception.  
replaceFAEnd (int reqId, string text) void  
wshMetaData (int reqId, string dataJson) void  
wshEventData (int reqId, string dataJson) void  
historicalSchedule (int reqId, string startDateTime …) void  
userInfo (int reqId, string whiteBrandingId …) void  

---

## Execution Class Reference
Describes an order’s execution.

**Name | Type | Description**

- OrderId int – The API client’s order Id.  
- ClientId int – The API client identifier which placed the order.  
- ExecId string – The execution’s identifier. Each partial fill has a separate ExecId.  
- Time string – The execution’s server time.  
- AcctNumber string – The account to which the order was allocated.  
- Exchange string – The exchange where the execution took place.  
- Side string – BOT (buy) or SLD (sell).  
- Shares decimal – The number of shares filled.  
- Price double – Execution price excluding commissions.  
- PermId int – TWS order identifier (can be 0).  
- Liquidation int – Identifies liquidation executions.  
- CumQty decimal – Cumulative quantity.  
- AvgPrice double – Average price.  
- OrderRef string – User-customizable reference string.  
- EvRule string – Economic Value Rule name.  
- EvMultiplier double – Sensitivity of market value per unit price change.  
- ModelCode string – Model code.  
- LastLiquidity Liquidity – Liquidity type of execution.  
- PendingPriceRevision bool – Pending price revision.  

Public Member Functions  
- Equals (object obj) override bool  
- GetHashCode () override int  

---

## ExecutionCondition Class Reference
Represents a condition requiring a specific execution event.

- Exchange string – Exchange where the symbol must trade.  
- SecType string – Instrument type.  
- Symbol string – Instrument symbol.  

Public Member Functions  
- ToString() override string  
- Equals (object obj) override bool  
- GetHashCode () override int  
- Deserialize (IDecoder inStream) override void  
- Serialize (BinaryWriter outStream) override void  

---

## ExecutionFilter Class Reference
Filter when requesting executions.

- ClientId int – The API client which placed the order.  
- AcctCode string – The account.  
- Time string – From this timestamp onward.  
- Symbol string – The instrument’s symbol.  
- SecType string – The security type.  
- Exchange string – The exchange.  
- Side string – BUY or SELL.  

---

## HistoricalTick Class Reference
Used with `whatToShow = MIDPOINT`.

- Time long  
- Price double  
- Size decimal  

---

## HistoricalTickBidAsk Class Reference
Used with `whatToShow = BID_ASK`.

- Time long – UNIX timestamp.  
- TickAttribLast TickAttribLast – Tick attributes.  
- Price double – Last price.  
- Size decimal – Last size.  
- Exchange string – Source exchange.  
- SpecialConditions string – Trade conditions.  

---

## HistoricalTickLast Class Reference
Used with `whatToShow = TRADES`.

- Time long  
- TickAttribLast TickAttribLast  
- Price double  
- Size decimal  
- Exchange string  
- SpecialConditions string  

---

## Liquidity Class Reference
Describes liquidity type of execution.

- Value int  

Public Member Functions  
- ToString() override string  

---

## MarginCondition Class Reference
Used with conditional orders to cancel or submit based on margin cushion.  

- Percent int – Margin cushion percentage.  
- IsMore bool – True if trigger when cushion is more, else less.  

---

## Order Class Reference
Order definition.

**Key Fields (partial):**  
- Account string – Allocation account.  
- Action string – BUY / SELL / SSHORT / SLONG.  
- ActiveStartTime string – Start time for GTC.  
- ActiveStopTime string – Stop time for GTC.  
- AdjustableTrailingUnit int – Trailing unit (amount or %).  
- AdjustedOrderType string – Type for adjusted stop orders.  
- AdjustedStopLimitPrice double  
- AdjustedStopPrice double  
- AdjustedTrailingAmount double  
- AdvancedErrorOverride string  
- AlgoId string  
- AlgoParams List  
- AlgoStrategy string – e.g., ArrivalPx, DarkIce, PctVol, TWAP, VWAP.  
- AllOrNone bool  
- AuctionStrategy int – BOX orders (1 Match, 2 Improve, 3 Transparent).  
- AutoCancelDate string  
- AutoCancelParent bool  
- AuxPrice double – e.g. stop price, trailing amount.  
- BasisPoints double – For EFP orders.  
- BlockOrder bool  
- CashQty double  
- ClearingAccount string  
- ClearingIntent string  
- ClientId int – API client id.  
- CompeteAgainstBestOffset double – IBKRATS orders.  
- Conditions List – Conditional order logic.  
- ConditionsCancelOrder bool  
- ConditionsIgnoreRth bool  
- ContinuousUpdate int – VOL orders.  
- Delta double – For BOX orders.  
- DeltaNeutral* fields – For hedge orders.  
- DiscretionaryAmt double  
- DisplaySize int  
- Duration int – GTD orders.  
- ExemptCode int  
- ExtOperator string – CME Rule 576 operator.  
- FaGroup / FaMethod / FaPercentage string – Advisor allocation.  
- GoodAfterTime string – Activation time.  
- GoodTillDate string – Expiration for GTD.  
- HedgeType string – Delta, Beta, FX, Pair.  
- Hidden bool – Hide from market depth.  
- LmtPrice double – Limit price.  
- ManualOrderIndicator int – CME Rule 576 manual vs automated.  
- Mifid2DecisionAlgo / Maker / ExecutionAlgo / Trader – MiFID 2 fields.  
- MinQty int  
- ModelCode string – Model routing.  
- OcaGroup string – One-Cancels-All group.  
- OrderId int – API order id.  
- OrderType string – Order type.  
- OutsideRth bool – Allow fill outside RTH.  
- ParentId int – For bracket orders.  
- PermId int – Host order id.  
- RandomizePrice / Size bool – For volatility orders.  
- RefFuturesConId int  
- ReferenceExchange string  
- RouteMarketableToBbo bool  
- Rule80A string – Account origin type.  
- Scale* fields – For scale orders.  
- ShortSaleSlot int  
- SmartComboRoutingParams List  
- Solicited bool – Broker-solicited orders.  
- StockRangeLower / Upper double – For BOX/VOL mgmt.  
- SweepToFill bool  
- Tier SoftDollarTier  
- Tif string – DAY, GTC, etc.  
- TotalQuantity decimal  
- TrailStopPrice double  
- TrailingPercent double  
- Transmit bool  
- TriggerMethod int  
- Volatility double – Option volatility orders.  
- WhatIf bool – Calculate commissions/margins.  

---

## Order Class Reference (continued)

- customerAccount string – For omnibus accounts, unique identifier of subaccount.  
- isProCustomer bool – For omnibus accounts, indicates Professional/Non-Professional.  

Public Member Functions  
- Equals (object obj) override bool  
- GetHashCode () override int  

Static Public Member Functions  
- CUSTOMER = 0 static int  
- FIRM = 1 static int  
- OPT_UNKNOWN = ‘?’ static char  
- OPT_BROKER_DEALER = ‘b’ static char  
- OPT_CUSTOMER = ‘c’ static char  
- OPT_FIRM = ‘f’ static char  
- OPT_ISEMM = ‘m’ static char  
- OPT_FARMM = ‘n’ static char  
- OPT_SPECIALIST = ‘y’ static char  
- AUCTION_MATCH = 1 static int  
- AUCTION_IMPROVEMENT = 2 static int  
- AUCTION_TRANSPARENT = 3 static int  
- EMPTY_STR = “” static string  
- COMPETE_AGAINST_BEST_OFFSET_UP_TO_MID = double.PositiveInfinity  

---

## OrderAllocation Class Reference
Denotes advisor’s allocations when trading subaccounts.

- Account string – Account ID (e.g., U1234567).  
- Position decimal – Current position of account.  
- PositionDesired decimal – Target full position after trade.  
- PositionAfter decimal – Position after trade.  
- DesiredAllocQty decimal – Quantity to increase.  
- AllowedAllocQty decimal – Max allowed quantity.  
- IsMonetary bool – True if monetary allocation.  

---

## OrderCancel Class Reference
Parameters when cancelling an order.

- extOperator string – CME Rule 576 operator id.  
- manualOrderIndicator int – 1 if manual, 0 if automated.  
- manualOrderCancelTime string – Format “YYYYMMDD-HH:mm:ss” UTC.  

---

## OrderComboLeg Class Reference
Allows specifying price on an order’s leg.

- Price double – Order leg’s price.  

Public Member Functions  
- OrderComboLeg (double price) constructor  
- GetHashCode () override int  

---

## OrderState Class Reference
Active order’s current state.

- Status string – Order status.  
- InitMarginBefore / MaintMarginBefore / EquityWithLoanBefore string  
- InitMarginChange / MaintMarginChange / EquityWithLoanChange string  
- InitMarginAfter / MaintMarginAfter / EquityWithLoanAfter string  
- InitMarginBeforeOutsideRTH / MaintMarginBeforeOutsideRTH / EquityWithLoanBeforeOutsideRTH float  
- InitMarginChangeOutsideRTH / MaintMarginChangeOutsideRTH / EquityWithLoanChangeOutsideRTH float  
- InitMarginAfterOutsideRTH / MaintMarginAfterOutsideRTH / EquityWithLoanAfterOutsideRTH float  
- Commission / MinCommission / MaxCommission double  
- CommissionCurrency string  
- WarningText string  
- CompletedTime string  
- CompletedStatus string  

Public Member Functions  
- OrderState (…) constructor  
- Equals (object obj) override bool  
- GetHashCode () override int  

---

## PercentChangeCondition Class Reference
Conditional orders based on percentage change of instrument vs last close.

- Value string  
- ChangePercent double  

---

## PriceCondition Class Reference
Conditional orders based on price of instrument.

- Value string  
- Price string  
- TriggerMethod TriggerMethod  

Public Member Functions  
- ToString() override string  
- Equals (object obj) override bool  
- GetHashCode () override int  
- Deserialize (IDecoder inStream) override void  
- Serialize (BinaryWriter outStream) override void  

---

## ScannerSubscription Class Reference
Defines a market scanner request.

- NumberOfRows int  
- Instrument string  
- LocationCode string  
- ScanCode string  
- AbovePrice double  
- BelowPrice double  
- AboveVolume int  
- AverageOptionVolumeAbove int  
- MarketCapAbove double  
- MarketCapBelow double  
- MoodyRatingAbove string  
- MoodyRatingBelow string  
- SpRatingAbove string  
- SpRatingBelow string  
- MaturityDateAbove string  
- MaturityDateBelow string  
- CouponRateAbove double  
- CouponRateBelow double  
- ExcludeConvertible bool  
- ScannerSettingPairs string  
- StockTypeFilter string  

---

## SoftDollarTier Class Reference
Container for storing Soft Dollar Tier information.

- Name string – Name of Soft Dollar Tier.  
- Value string – Value.  
- DisplayName string – Display name.  

---

## TagValue Class Reference
Represents tag-value pairs.

- Tag string  
- Value string  

---

## TickAttrib Class Reference
Tick attributes for market data.

- CanAutoExecute bool  
- PastLimit bool  
- PreOpen bool  

---

## TimeCondition Class Reference
Conditional orders based on time.

- Time string – Time string.  
- IsMore bool – Whether condition is “more” or “less”.  

---

## VolumeCondition Class Reference
Conditional orders based on traded volume.

- Volume long – Volume threshold.  
- IsMore bool – Whether condition triggers on more/less.  

---

## WshEventData Class Reference
Represents WSH (Wall Street Horizon) event data.

- ConId int  
- EventDate string  
- EventType string  
- … (other fields as supported by IBKR WSH API)  

---
## WshEventData Class Reference (continued)

- ConId int – Contract identifier.  
- EventDate string – Date of the event.  
- EventType string – Type of event (earnings, guidance, etc.).  
- Value string – Event value.  
- Text string – Descriptive text.  

Public Member Functions  
- Equals (object obj) override bool  
- GetHashCode () override int  

---

## Summary of Classes / Interfaces

- **AccountSummaryTags Class** – Provides all existing account summary tags.  
- **Bar Class** – Represents historical bar data (OHLCV).  
- **ComboLeg Class** – Represents one leg of a combo order.  
- **CommissionAndFeesReport Class** – Commission and fees generated by an execution.  
- **Contract Class** – Defines a financial instrument.  
- **ContractDetails Class** – Extended contract details including trading hours, min tick, etc.  
- **CodeMsgPair Class** – Associates an error code with a message.  
- **DeltaNeutralContract Class** – Defines delta-neutral hedge contracts.  
- **EClient Class** – Client-side API methods to communicate with TWS/Gateway.  
- **EClientSocket Class** – Socket-based implementation of EClient.  
- **EReader Class** – Handles incoming messages.  
- **EReaderSignal Interface** – Signals message availability.  
- **EWrapper Interface** – Callback interface every client must implement.  
- **Execution Class** – Details of an order execution.  
- **ExecutionCondition Class** – Order activation based on an execution event.  
- **ExecutionFilter Class** – Filters execution reports.  
- **HistoricalTick / BidAsk / Last Classes** – Represent tick-level historical data.  
- **Liquidity Class** – Execution liquidity type.  
- **MarginCondition Class** – Order condition based on margin cushion.  
- **Order Class** – Comprehensive order definition.  
- **OrderAllocation Class** – Advisor allocation across subaccounts.  
- **OrderCancel Class** – Parameters for cancelling orders.  
- **OrderComboLeg Class** – Per-leg price for combo orders.  
- **OrderState Class** – Active order state and margin impact.  
- **PercentChangeCondition Class** – Condition based on % change.  
- **PriceCondition Class** – Condition based on price.  
- **ScannerSubscription Class** – Market scanner subscription.  
- **SoftDollarTier Class** – Soft dollar tier information.  
- **TagValue Class** – Generic tag-value pair.  
- **TickAttrib Class** – Attributes for ticks.  
- **TimeCondition Class** – Condition based on time.  
- **VolumeCondition Class** – Condition based on volume.  
- **WshEventData Class** – Wall Street Horizon event data.  

---

## Notes
- This reference is in **beta** and subject to further elaboration.  
- Many fields (especially bond-related) are placeholders and not currently supported via API.  
- Some fields (e.g., MiFID 2 identifiers, CME Rule 576 fields) are regulatory requirements.  
- For complete option/futures chains, prefer `reqSecDefOptParams` over `reqContractDetails`.  
- API pacing limits apply to market/historical data requests.  

---

# End of TWS API Reference (Markdown version)
